/** * DebugPanel * * @copyright 		2010 * @author			Justin Taylor * @version			1.0 * @langversion		ActionScript 3.0 			 * @playerversion 	Flash 10.0.0 * */package net.findzen.utils {	import flash.events.KeyboardEvent;	import flash.display.Stage;	import flash.display.Sprite;	import flash.display.Shape;	import flash.text.TextField;    import flash.text.TextFieldAutoSize;    import flash.text.TextFormat;	import flash.system.Capabilities;		public class DebugPanel {		private static const TXT_COLOR	: uint 		= 0xFFFFFF;		private static const TXT_SIZE	: Number 	= 10;		private static const FONT		: String 	= "Monaco";		private static const BG_COLOR	: uint   	= 0x000000;		private static const BG_ALPHA	: Number 	= .8;				private static var __panel		: Sprite;		private static var __output		: TextField;		private static var __format		: TextFormat;		private static var __stage		: Stage;					public function DebugPanel() { }				private static function __init():void {			__panel = new Sprite();			__panel.visible = false;			__stage.addChild(__panel);						_drawBg();			_addTextField();			_getSystemCapabilities();						__stage.addEventListener(KeyboardEvent.KEY_DOWN, _onKeyDown);		}				private static function _drawBg():void {            var bg:Shape = new Shape();						with(bg) {				graphics.beginFill(BG_COLOR);				graphics.drawRect(0, 0, __stage.stageWidth, __stage.stageHeight);				graphics.endFill();				alpha = BG_ALPHA;			}            			__panel.addChild(bg);        }				private static function _addTextField():void {			__format = new TextFormat();						__format.font = FONT;			__format.size = TXT_SIZE;            __output = new TextField();						with(__output) {				wordWrap = true;				multiline = true;				textColor = TXT_COLOR;				width = __stage.stageWidth;				height = __stage.stageHeight;			}						__panel.addChild(__output);        }				private static function _getSystemCapabilities():void {						output(				"avHardwareDisable: " 		+ Capabilities.avHardwareDisable,				"hasAccessibility: " 		+ Capabilities.hasAccessibility,				"hasAudio: " 				+ Capabilities.hasAudio,				"hasAudioEncoder: " 		+ Capabilities.hasAudioEncoder,				"hasEmbeddedVideo: " 		+ Capabilities.hasEmbeddedVideo,				"hasIME: " 					+ Capabilities.hasIME,				"hasMP3: " 					+ Capabilities.hasMP3,				"hasPrinting: " 			+ Capabilities.hasPrinting,				"hasScreenBroadcast: " 		+ Capabilities.hasScreenBroadcast,				"hasScreenPlayback: " 		+ Capabilities.hasScreenPlayback,				"hasStreamingAudio: " 		+ Capabilities.hasStreamingAudio,				"hasStreamingVideo: " 		+ Capabilities.hasStreamingVideo,				"hasTLS: " 					+ Capabilities.hasTLS,				"hasVideoEncoder: " 		+ Capabilities.hasVideoEncoder,				"isDebugger: " 				+ Capabilities.isDebugger,				"isEmbeddedInAcrobat: " 	+ Capabilities.isEmbeddedInAcrobat,				"language: " 				+ Capabilities.language,				"localFileReadDisable: " 	+ Capabilities.localFileReadDisable,				"manufacturer: " 			+ Capabilities.manufacturer,				"maxLevelIDC: " 			+ Capabilities.maxLevelIDC,				"os: " 						+ Capabilities.os,				"pixelAspectRatio: " 		+ Capabilities.pixelAspectRatio,				"playerType: " 				+ Capabilities.playerType,				"screenColor: " 			+ Capabilities.screenColor,				"screenDPI: " 				+ Capabilities.screenDPI,				"screenResolutionX: " 		+ Capabilities.screenResolutionX,				"screenResolutionY: " 		+ Capabilities.screenResolutionY,				"serverString: " 			+ Capabilities.serverString,				"touchscreenType: " 		+ Capabilities.touchscreenType,				"version: " 				+ Capabilities.version,				"=======================================================================",				" "			);					}				public static function output(...$args):void {			for(var i in $args) __output.appendText($args[i].toString() + "\n");			__output.setTextFormat(__format);		}				public static function set stage($stage:Stage):void {			__stage = $stage;			__init();		}				private static function _onKeyDown($e:KeyboardEvent):void {						if($e.shiftKey && $e.ctrlKey && $e.keyCode == 48) __panel.visible = !__panel.visible; // CMD/CTRL + SHIFT + 0						if(__panel.visible) {				switch($e.keyCode) {					case 38: // up											if($e.shiftKey) __output.scrollV = 0;						else 		    __output.scrollV--;												break;											case 40: // down											if($e.shiftKey) __output.scrollV = __output.maxScrollV;						else 		    __output.scrollV++;												break;				}			}		}	}}