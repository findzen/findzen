package net.findzen.io {	import flash.events.*	import flash.net.*;		import com.adobe.serialization.json.*;		public class SendAndLoadJSON extends EventDispatcher {		private var _request:URLRequest;		private var _loader:URLLoader;		private var _data:Object;		public function SendAndLoadJSON($url:String, $vars:URLVariables) {			_request = new URLRequest($url);			_loader = new URLLoader();			_data = new URLVariables();						_request.data = $vars;			_request.method = URLRequestMethod.POST;						_loader.addEventListener(Event.COMPLETE, _onLoaderComplete);			_loader.addEventListener(IOErrorEvent.IO_ERROR, _onIOError);			_loader.load(_request);		}				private function _onLoaderComplete($e:Event):void {			//trace(" ");			//trace($e.target.data);			//trace(" ");						_data = JSON.decode($e.target.data);						dispatchEvent($e);						_close();		}				private function _onIOError($error:IOErrorEvent):void {			trace("SendAndLoad._onIOError: " + $error);						_close();		}				public function get data():Object {			return _data;		}				private function _close():void {			try {								_loader.removeEventListener(Event.COMPLETE, _onLoaderComplete);				_loader.close();				_loader = null;							} catch($error:Error) {								trace("SendAndLoad._close: " + $error);							}		}	}}